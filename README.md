# DataReplicatorController

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π (master) –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –∏ –¥–æ—á–µ—Ä–Ω–∏–º–∏ (slave) –±–∞–∑–∞–º–∏ PostgreSQL.  
–ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL —á–µ—Ä–µ–∑ [Npgsql](https://www.npgsql.org/).
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫ –∏ –∫–æ–ª–æ–Ω–æ–∫ —Ç–∞–±–ª–∏—Ü **–ø–æ—Å—Ç—Ä–æ—á–Ω–æ –∏ –ø–æ–∫–æ–ª–æ–Ω–æ—á–Ω–æ**.
- –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö (`geometry`, `geography`).
- –ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ `appsetting.json`.
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ª–æ–≥–æ–≤:
  - `./logs/{yyyy}/{MM}/log-{dd.MM.yyyy}.txt`
  - `./logs/log-last.txt`

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- `Program.cs` ‚Äì –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ (–∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î, —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤).
- `appsetting.json` ‚Äì –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –∏ –¥–æ—á–µ—Ä–Ω–∏—Ö –ë–î.
- `logs/` ‚Äì –ø–∞–ø–∫–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—Ç—á—ë—Ç–æ–≤ –æ –ø—Ä–æ–≤–µ—Ä–∫–∞—Ö.

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞
–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —É–∫–∞–∂–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ `appsetting.json`:

json
{
  "ParentDatabase": {
    "ConnectionString": "Host=your_host;Port=5432;Database=parent_db;Username=user;Password=password;",
    "Schema": "Schema0"
  },
  "ChildDatabases": [
    {
      "ConnectionString": "Host=your_host;Port=5432;Database=child_db1;Username=user;Password=password;",
      "Schema": "Schema1",
      "Tables": [ "table1", "table2", "table3" ]
    }
  ]
}

–ü–æ–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
ParentDatabase ‚Äì —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:

ConnectionString ‚Äì —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL.

Schema ‚Äì —Å—Ö–µ–º–∞, –≥–¥–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è —ç—Ç–∞–ª–æ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã.

ChildDatabases ‚Äì —Å–ø–∏—Å–æ–∫ –¥–æ—á–µ—Ä–Ω–∏—Ö –±–∞–∑:

ConnectionString ‚Äì —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

Schema ‚Äì —Å—Ö–µ–º–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏.

Tables ‚Äì —Å–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è.

‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫
–°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Visual Studio.

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω .NET –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–∞–∫–µ—Ç Npgsql.

–í –ø–∞–ø–∫–µ —Å –ø—Ä–æ–µ–∫—Ç–æ–º –ø–æ–ª–æ–∂–∏—Ç–µ appsetting.json.

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É ‚Äì —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø–æ—è–≤–∏—Ç—Å—è –≤ ./logs.

üìù –ü—Ä–∏–º–µ—Ä –ª–æ–≥–∞
vbnet
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
[OK] ParentDB:Schema0.table1-ChildDB:Schema1.table1
[Error] ParentDB:Schema0.table2-ChildDB:Schema1.table2
[Error - Error connecting to the database or table] ParentDB:Schema0.table3-ChildDB:Schema1.table3
üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
.NET 6+

Npgsql ‚Äì –¥—Ä–∞–π–≤–µ—Ä –¥–ª—è PostgreSQL

Newtonsoft.Json
